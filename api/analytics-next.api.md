## API Report File for "@segment/analytics-next"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { Alias } from '@segment/facade'
import { Facade } from '@segment/facade'
import { Group as Group_2 } from '@segment/facade'
import { Identify } from '@segment/facade'
import { Page } from '@segment/facade'
import { Rule } from '@segment/tsub/dist/store'
import { Track } from '@segment/facade'

// @public (undocumented)
export interface AbstractContext {
  // (undocumented)
  cancel: () => never
  // Warning: (ae-forgotten-export) The symbol "LogLevel" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  log: (level: LogLevel, message: string, extras?: object) => void
  // Warning: (ae-forgotten-export) The symbol "Stats" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  stats: Stats
}

// Warning: (ae-forgotten-export) The symbol "Emitter" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export class Analytics extends Emitter {
  constructor(
    settings: AnalyticsSettings,
    options?: InitOptions,
    queue?: EventQueue,
    user?: User,
    group?: Group
  )
  // (undocumented)
  add(): void
  // Warning: (ae-forgotten-export) The symbol "DestinationMiddlewareFunction" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  addDestinationMiddleware(
    integrationName: string,
    ...middlewares: DestinationMiddlewareFunction[]
  ): Promise<Analytics>
  // (undocumented)
  addEventListener(): void
  // (undocumented)
  addIntegration(): void
  // (undocumented)
  addIntegrationMiddleware(): void
  // Warning: (ae-forgotten-export) The symbol "MiddlewareFunction" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  addSourceMiddleware(fn: MiddlewareFunction): Promise<Analytics>
  // Warning: (ae-forgotten-export) The symbol "AliasParams" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  alias(...args: AliasParams): Promise<DispatchedEvent>
  // (undocumented)
  debug(toggle: boolean): Analytics
  // (undocumented)
  deregister(...plugins: string[]): Promise<Context>
  // (undocumented)
  get failedInitializations(): string[]
  // (undocumented)
  group(...args: UserParams): Promise<DispatchedEvent> | Group
  // (undocumented)
  hasListeners(): void
  // Warning: (ae-forgotten-export) The symbol "UserParams" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  identify(...args: UserParams): Promise<DispatchedEvent>
  // (undocumented)
  init: (
    settings?: AnalyticsSettings | undefined,
    options?: InitOptions | undefined
  ) => Promise<Analytics>
  // (undocumented)
  initialize(
    settings?: AnalyticsSettings,
    options?: InitOptions
  ): Promise<Analytics>
  // (undocumented)
  initialized: boolean
  // Warning: (ae-forgotten-export) The symbol "LegacyIntegration" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  get Integrations(): Record<string, LegacyIntegration>
  // (undocumented)
  integrations: Integrations
  // (undocumented)
  listeners(): void
  // (undocumented)
  log(): void
  // (undocumented)
  noConflict(): Analytics
  // (undocumented)
  normalize(msg: SegmentEvent): SegmentEvent
  // (undocumented)
  options: InitOptions
  // Warning: (ae-forgotten-export) The symbol "PageParams" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  page(...args: PageParams): Promise<DispatchedEvent>
  // (undocumented)
  pageview(url: string): Promise<Analytics>
  // (undocumented)
  get plugins(): any
  // (undocumented)
  push(args: any[]): void
  // (undocumented)
  queryString(query: string): Promise<Context[]>
  // Warning: (ae-forgotten-export) The symbol "EventQueue" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  queue: EventQueue
  // (undocumented)
  ready(callback?: Function): Promise<unknown>
  // (undocumented)
  register(...plugins: Plugin_2[]): Promise<Context>
  // (undocumented)
  removeAllListeners(): void
  // (undocumented)
  removeEventListener(): void
  // (undocumented)
  removeListener(): void
  // (undocumented)
  reset(): void
  // (undocumented)
  screen(...args: PageParams): Promise<DispatchedEvent>
  // (undocumented)
  setAnonymousId(id?: string): ID
  // (undocumented)
  protected settings: AnalyticsSettings
  // (undocumented)
  timeout(timeout: number): void
  // Warning: (ae-forgotten-export) The symbol "EventParams" needs to be exported by the entry point index.d.ts
  // Warning: (ae-forgotten-export) The symbol "DispatchedEvent" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  track(...args: EventParams): Promise<DispatchedEvent>
  // Warning: (ae-forgotten-export) The symbol "LinkArgs" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  trackClick(...args: LinkArgs): Promise<Analytics>
  // (undocumented)
  trackForm(...args: FormArgs): Promise<Analytics>
  // (undocumented)
  trackLink(...args: LinkArgs): Promise<Analytics>
  // Warning: (ae-forgotten-export) The symbol "FormArgs" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  trackSubmit(...args: FormArgs): Promise<Analytics>
  // @deprecated (undocumented)
  use(legacyPluginFactory: (analytics: Analytics) => void): Analytics
  // (undocumented)
  user: () => User
  // (undocumented)
  get VERSION(): string
}

// @public (undocumented)
export class AnalyticsBrowser {
  // (undocumented)
  static load(
    settings: AnalyticsSettings,
    options?: InitOptions
  ): Promise<[Analytics, Context]>
  // (undocumented)
  static standalone(writeKey: string, options?: InitOptions): Promise<Analytics>
}

// @public (undocumented)
export class AnalyticsNode {
  // (undocumented)
  static load(settings: { writeKey: string }): Promise<[Analytics, Context]>
}

// @public (undocumented)
export interface AnalyticsSettings {
  // (undocumented)
  [key: string]: unknown
  // (undocumented)
  plugins?: Plugin_2[]
  // (undocumented)
  timeout?: number
  // (undocumented)
  writeKey: string
}

// @public (undocumented)
export class Context implements AbstractContext {
  constructor(event: SegmentEvent, id?: string)
  // (undocumented)
  get attempts(): number
  set attempts(attempts: number)
  // (undocumented)
  cancel: (error?: Error | ContextCancelation | undefined) => never
  // (undocumented)
  get event(): SegmentEvent
  set event(evt: SegmentEvent)
  // (undocumented)
  flush(): void
  // (undocumented)
  get id(): string
  // Warning: (ae-forgotten-export) The symbol "MetricsOptions" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  static initMetrics(options?: MetricsOptions): void
  // (undocumented)
  isSame(other: Context): boolean
  // (undocumented)
  log(level: LogLevel, message: string, extras?: object): void
  // Warning: (ae-forgotten-export) The symbol "Logger" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  logger: Logger
  // Warning: (ae-forgotten-export) The symbol "LogMessage" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  logs(): LogMessage[]
  // (undocumented)
  stats: Stats
  // (undocumented)
  static system(): Context
  // (undocumented)
  toJSON(): SerializedContext
  // (undocumented)
  updateEvent(path: string, val: unknown): SegmentEvent
}

// @public (undocumented)
export class ContextCancelation {
  // Warning: (ae-forgotten-export) The symbol "CancelationOptions" needs to be exported by the entry point index.d.ts
  constructor(options: CancelationOptions)
  // (undocumented)
  reason?: string
  // (undocumented)
  retry: boolean
  // (undocumented)
  type: string
}

// Warning: (ae-forgotten-export) The symbol "Store" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export class Cookie extends Store {
  constructor(options?: CookieOptions)
  // (undocumented)
  static available(): boolean
  // (undocumented)
  static defaults: CookieOptions
  // (undocumented)
  get<T>(key: string): T | null
  // (undocumented)
  remove(key: string): void
  // (undocumented)
  set<T>(key: string, value: T): T | null
}

// @public (undocumented)
export interface CookieOptions {
  // (undocumented)
  domain?: string
  // (undocumented)
  maxage?: number
  // (undocumented)
  path?: string
  // (undocumented)
  sameSite?: string
  // (undocumented)
  secure?: boolean
}

// @public (undocumented)
export class EventFactory {
  constructor(user: User)
  // (undocumented)
  alias(
    to: string,
    from: string | null,
    options?: Options,
    globalIntegrations?: Integrations
  ): SegmentEvent
  // (undocumented)
  group(
    groupId: ID,
    traits?: SegmentEvent['traits'],
    options?: Options,
    globalIntegrations?: Integrations
  ): SegmentEvent
  // (undocumented)
  identify(
    userId: ID,
    traits?: SegmentEvent['traits'],
    options?: Options,
    globalIntegrations?: Integrations
  ): SegmentEvent
  // (undocumented)
  normalize(event: SegmentEvent): SegmentEvent
  // (undocumented)
  page(
    category: string | null,
    page: string | null,
    properties?: object,
    options?: Options,
    globalIntegrations?: Integrations
  ): SegmentEvent
  // (undocumented)
  screen(
    category: string | null,
    screen: string | null,
    properties?: object,
    options?: Options,
    globalIntegrations?: Integrations
  ): SegmentEvent
  // (undocumented)
  track(
    event: string,
    properties?: SegmentEvent['properties'],
    options?: Options,
    globalIntegrations?: Integrations
  ): SegmentEvent
  // (undocumented)
  user: User
}

// @public (undocumented)
export class Group extends User {
  constructor(options?: UserOptions, cookie?: CookieOptions)
  // (undocumented)
  anonymousId: (_id?: ID) => ID
}

// @public (undocumented)
export type ID = string | null | undefined

// @public (undocumented)
export interface InitOptions {
  // (undocumented)
  cookie?: CookieOptions
  // (undocumented)
  group?: UserOptions
  // (undocumented)
  initialPageview?: boolean
  // (undocumented)
  integrations?: Integrations
  // (undocumented)
  plan?: Plan
  // (undocumented)
  retryQueue?: boolean
  // (undocumented)
  user?: UserOptions
}

// @public (undocumented)
export type Integrations = {
  All?: boolean
  [integration: string]: boolean | JSONObject | undefined
}

// @public (undocumented)
export type JSONArray = Array<JSONValue>

// @public (undocumented)
export type JSONObject = {
  [member: string]: JSONValue
}

// @public (undocumented)
export type JSONPrimitive = string | number | boolean | null

// @public (undocumented)
export type JSONValue = JSONPrimitive | JSONObject | JSONArray

// @public (undocumented)
export interface LegacyIntegrationConfiguration {
  // (undocumented)
  [key: string]: any
  // (undocumented)
  bundlingStatus?: string
  // (undocumented)
  retryQueue?: boolean
  // (undocumented)
  type?: string
  // (undocumented)
  versionSettings?: {
    version?: string
    override?: string
    componentTypes?: Array<'browser' | 'android' | 'ios' | 'server'>
  }
}

// @public (undocumented)
export interface LegacySettings {
  // (undocumented)
  enabledMiddleware?: Record<string, boolean>
  // (undocumented)
  integrations: {
    [name: string]: LegacyIntegrationConfiguration
  }
  // (undocumented)
  legacyVideoPluginsEnabled?: boolean
  // (undocumented)
  metrics?: MetricsOptions
  // (undocumented)
  middlewareSettings?: {
    routingRules: RoutingRule[]
  }
  // (undocumented)
  plan?: Plan
  // Warning: (ae-forgotten-export) The symbol "RemotePlugin" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  remotePlugins?: RemotePlugin[]
}

// @public (undocumented)
export function loadLegacySettings(writeKey: string): Promise<LegacySettings>

// @public (undocumented)
export class LocalStorage extends Store {
  // (undocumented)
  static available(): boolean
  // (undocumented)
  get<T>(key: string): T | null
  // (undocumented)
  remove(key: string): void
  // (undocumented)
  set<T>(key: string, value: T): T | null
}

// @public (undocumented)
export type Options = {
  integrations?: Integrations
  anonymousId?: ID
  timestamp?: Date | string
  context?: AnalyticsContext
  traits?: object
  [key: string]: any
}

// @public
export interface Plan {
  // (undocumented)
  track?: TrackPlan
}

// @public (undocumented)
export interface PlanEvent {
  enabled: boolean
  integrations: {
    [key: string]: boolean
  }
}

// @public (undocumented)
interface Plugin_2 {
  // (undocumented)
  alias?: (ctx: Context) => Promise<Context> | Context
  // (undocumented)
  group?: (ctx: Context) => Promise<Context> | Context
  // (undocumented)
  identify?: (ctx: Context) => Promise<Context> | Context
  // (undocumented)
  isLoaded: () => boolean
  // Warning: (ae-forgotten-export) The symbol "PluginConfig" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  load: (
    ctx: Context,
    instance: Analytics,
    config?: PluginConfig
  ) => Promise<unknown>
  // (undocumented)
  name: string
  // (undocumented)
  page?: (ctx: Context) => Promise<Context> | Context
  // (undocumented)
  ready?: () => Promise<unknown>
  // (undocumented)
  screen?: (ctx: Context) => Promise<Context> | Context
  // (undocumented)
  track?: (ctx: Context) => Promise<Context> | Context
  // (undocumented)
  type: 'before' | 'after' | 'destination' | 'enrichment' | 'utility'
  // (undocumented)
  unload?: (ctx: Context, instance: Analytics) => Promise<unknown> | unknown
  // (undocumented)
  version: string
}
export { Plugin_2 as Plugin }

// @public (undocumented)
export interface ReservedTraits {
  // (undocumented)
  address: Partial<{
    city: string
    country: string
    postalCode: string
    state: string
    street: string
  }>
  // (undocumented)
  age: number
  // (undocumented)
  avatar: string
  // (undocumented)
  birthday: Date
  // (undocumented)
  company: Partial<{
    name: string
    id: string | number
    industry: string
    employee_count: number
  }>
  // (undocumented)
  createdAt: Date
  // (undocumented)
  description: string
  // (undocumented)
  email: string
  // (undocumented)
  firstName: string
  // (undocumented)
  gender: string
  // (undocumented)
  id: string
  // (undocumented)
  lastName: string
  // (undocumented)
  name: string
  // (undocumented)
  phone: string
  // (undocumented)
  plan: string
  // (undocumented)
  title: string
  // (undocumented)
  username: string
  // (undocumented)
  website: string
}

// @public (undocumented)
export interface SegmentEvent {
  // (undocumented)
  anonymousId?: ID
  // (undocumented)
  category?: string
  // (undocumented)
  context?: AnalyticsContext | Options
  // (undocumented)
  event?: string
  // (undocumented)
  groupId?: ID
  // (undocumented)
  integrations?: Integrations
  // (undocumented)
  messageId?: string
  // (undocumented)
  _metadata?: {
    failedInitializations?: unknown[]
    bundled?: string[]
    unbundled?: string[]
    nodeVersion?: string
    bundledConfigIds?: string[]
    unbundledConfigIds?: string[]
    bundledIds?: string[]
  }
  // (undocumented)
  name?: string
  // (undocumented)
  options?: Options
  // (undocumented)
  previousId?: ID
  // (undocumented)
  properties?: object & {
    [k: string]: JSONValue
  }
  // (undocumented)
  sentAt?: Date
  // (undocumented)
  timestamp?: Date | string
  // (undocumented)
  traits?: object & {
    [k: string]: JSONValue
  }
  // (undocumented)
  type: 'track' | 'page' | 'identify' | 'group' | 'alias' | 'screen'
  // (undocumented)
  userId?: ID
  // (undocumented)
  writeKey?: string
}

// @public (undocumented)
export interface SerializedContext {
  // (undocumented)
  event: SegmentEvent
  // (undocumented)
  id: string
  // (undocumented)
  logs: LogMessage[]
  // Warning: (ae-forgotten-export) The symbol "Metric" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  metrics: Metric[]
}

// @public (undocumented)
export interface TrackPlan {
  // (undocumented)
  __default?: PlanEvent
  // (undocumented)
  [key: string]: PlanEvent | undefined
}

// @public (undocumented)
export class User {
  constructor(options?: UserOptions, cookieOptions?: CookieOptions)
  // (undocumented)
  anonymousId: (id?: ID) => ID
  // (undocumented)
  static defaults: {
    persist: boolean
    cookie: {
      key: string
      oldKey: string
    }
    localStorage: {
      key: string
    }
  }
  // (undocumented)
  id: (id?: ID) => ID
  // (undocumented)
  identify(id?: ID, traits?: object): void
  // (undocumented)
  load(): User
  // (undocumented)
  logout(): void
  // (undocumented)
  options: UserOptions
  // (undocumented)
  reset(): void
  // (undocumented)
  save(): boolean
  // (undocumented)
  traits: (traits?: object | null | undefined) => SegmentEvent['traits']
}

// @public (undocumented)
export interface UserOptions {
  // (undocumented)
  cookie?: {
    key?: string
    oldKey?: string
  }
  // (undocumented)
  localStorage?: {
    key: string
  }
  // (undocumented)
  localStorageFallbackDisabled?: boolean
  // (undocumented)
  persist?: boolean
}

// Warnings were encountered during analysis:
//
// dist/pkg/browser.d.ts:23:9 - (ae-forgotten-export) The symbol "RoutingRule" needs to be exported by the entry point index.d.ts
// dist/pkg/core/events/interfaces.d.ts:17:5 - (ae-forgotten-export) The symbol "AnalyticsContext" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)
```
